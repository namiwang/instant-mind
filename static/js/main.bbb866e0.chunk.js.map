{"version":3,"sources":["../node_modules/@ionic/core/dist/esm-es5 lazy /^/.//.*/.entry/.js$/ groupOptions: {} namespace object","../node_modules/ionicons/dist/esm lazy /^/.//.*/.entry/.js$/ include: //.entry/.js$/ exclude: //.system/.entry/.js$/ groupOptions: {} namespace object","models/node.ts","models/graph/layoutHalfNodes.ts","models/graph/graphFromDoc.ts","models/graph.ts","models/root.ts","components/Editor.tsx","components/CenterNode.tsx","components/Mind.tsx","pages/Home.tsx","App.tsx","serviceWorkerRegistration.ts","reportWebVitals.ts","index.tsx"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","keys","Object","module","exports","Node","types","model","identifierNumber","label","string","parent","maybe","reference","late","outgoing","side","number","posX","posY","views","self","clsx","center","sourcePosition","Position","Right","Left","undefined","targetPosition","position","x","y","data","type","className","klass","sourceHandle","source","toString","target","layoutHalfNodes","nodes","direction","g","dagre","graphlib","Graph","setGraph","rankdir","setDefaultEdgeLabel","halfNodes","filter","values","node","forEach","setNode","width","height","setEdge","layout","nodeWithPos","NODE_W","random","NODE_H","graphFromDoc","doc","console","info","level","nodesN","ancestors","pointingRight","parseItem","docNode","newNode","text","content","child","join","parsePara","subList","parseList","deltaY","deltaX","create","elements","Array","from","push","flowData","edge","edgeToParent","rootStore","graph","actions","updateDoc","log","RootStoreContext","createContext","useRoot","store","useContext","Editor","root","editor","useEditor","extensions","StarterKit","autofocus","onCreate","getJSON","onUpdate","getHTML","CenterNode","memo","Mind","observer","useState","flowInstance","setFlowInstance","onLoad","useCallback","instance","setTimeout","fitView","useEffect","nodeTypes","elementsSelectable","nodesConnectable","defaultZoom","variant","BackgroundVariant","Lines","Home","slot","icon","downloadOutline","fullscreen","collapse","size","App","Provider","value","Boolean","window","location","hostname","match","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"uGAAA,IAAIA,EAAM,CACT,8BAA+B,CAC9B,IACA,GAED,uBAAwB,CACvB,IACA,GAED,uBAAwB,CACvB,IACA,GAED,0BAA2B,CAC1B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,wBAAyB,CACxB,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,sBAAuB,CACtB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,qBAAsB,CACrB,IACA,IAED,mCAAoC,CACnC,IACA,IAED,uBAAwB,CACvB,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,wBAAyB,CACxB,IACA,IAED,yBAA0B,CACzB,IACA,IAED,wBAAyB,CACxB,IACA,IAED,uBAAwB,CACvB,IACA,GAED,uBAAwB,CACvB,IACA,IAED,yBAA0B,CACzB,IACA,GAED,8BAA+B,CAC9B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,yBAA0B,CACzB,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,sBAAuB,CACtB,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,wBAAyB,CACxB,IACA,IAED,gCAAiC,CAChC,IACA,KAGF,SAASC,EAAoBC,GAC5B,IAAIC,EAAoBC,EAAEJ,EAAKE,GAC9B,OAAOG,QAAQC,UAAUC,MAAK,WAC7B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBP,EAAM,KAEjD,MADAM,EAAEE,KAAO,mBACHF,KAIR,IAAIG,EAAMX,EAAIE,GAAMU,EAAKD,EAAI,GAC7B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","file":"static/js/main.bbb866e0.chunk.js","sourcesContent":["var map = {\n\t\"./ion-action-sheet.entry.js\": [\n\t\t381,\n\t\t5\n\t],\n\t\"./ion-alert.entry.js\": [\n\t\t382,\n\t\t6\n\t],\n\t\"./ion-app_8.entry.js\": [\n\t\t383,\n\t\t7\n\t],\n\t\"./ion-avatar_3.entry.js\": [\n\t\t384,\n\t\t17\n\t],\n\t\"./ion-back-button.entry.js\": [\n\t\t385,\n\t\t18\n\t],\n\t\"./ion-backdrop.entry.js\": [\n\t\t386,\n\t\t43\n\t],\n\t\"./ion-button_2.entry.js\": [\n\t\t387,\n\t\t19\n\t],\n\t\"./ion-card_5.entry.js\": [\n\t\t388,\n\t\t20\n\t],\n\t\"./ion-checkbox.entry.js\": [\n\t\t389,\n\t\t21\n\t],\n\t\"./ion-chip.entry.js\": [\n\t\t390,\n\t\t22\n\t],\n\t\"./ion-col_3.entry.js\": [\n\t\t391,\n\t\t44\n\t],\n\t\"./ion-datetime_3.entry.js\": [\n\t\t392,\n\t\t10\n\t],\n\t\"./ion-fab_3.entry.js\": [\n\t\t393,\n\t\t23\n\t],\n\t\"./ion-img.entry.js\": [\n\t\t394,\n\t\t45\n\t],\n\t\"./ion-infinite-scroll_2.entry.js\": [\n\t\t395,\n\t\t46\n\t],\n\t\"./ion-input.entry.js\": [\n\t\t396,\n\t\t24\n\t],\n\t\"./ion-item-option_3.entry.js\": [\n\t\t397,\n\t\t25\n\t],\n\t\"./ion-item_8.entry.js\": [\n\t\t398,\n\t\t26\n\t],\n\t\"./ion-loading.entry.js\": [\n\t\t399,\n\t\t27\n\t],\n\t\"./ion-menu_3.entry.js\": [\n\t\t400,\n\t\t28\n\t],\n\t\"./ion-modal.entry.js\": [\n\t\t401,\n\t\t8\n\t],\n\t\"./ion-nav_2.entry.js\": [\n\t\t402,\n\t\t14\n\t],\n\t\"./ion-popover.entry.js\": [\n\t\t403,\n\t\t9\n\t],\n\t\"./ion-progress-bar.entry.js\": [\n\t\t404,\n\t\t29\n\t],\n\t\"./ion-radio_2.entry.js\": [\n\t\t405,\n\t\t30\n\t],\n\t\"./ion-range.entry.js\": [\n\t\t406,\n\t\t31\n\t],\n\t\"./ion-refresher_2.entry.js\": [\n\t\t407,\n\t\t11\n\t],\n\t\"./ion-reorder_2.entry.js\": [\n\t\t408,\n\t\t16\n\t],\n\t\"./ion-ripple-effect.entry.js\": [\n\t\t409,\n\t\t47\n\t],\n\t\"./ion-route_4.entry.js\": [\n\t\t410,\n\t\t32\n\t],\n\t\"./ion-searchbar.entry.js\": [\n\t\t411,\n\t\t33\n\t],\n\t\"./ion-segment_2.entry.js\": [\n\t\t412,\n\t\t34\n\t],\n\t\"./ion-select_3.entry.js\": [\n\t\t413,\n\t\t35\n\t],\n\t\"./ion-slide_2.entry.js\": [\n\t\t414,\n\t\t48\n\t],\n\t\"./ion-spinner.entry.js\": [\n\t\t415,\n\t\t13\n\t],\n\t\"./ion-split-pane.entry.js\": [\n\t\t416,\n\t\t49\n\t],\n\t\"./ion-tab-bar_2.entry.js\": [\n\t\t417,\n\t\t36\n\t],\n\t\"./ion-tab_2.entry.js\": [\n\t\t418,\n\t\t15\n\t],\n\t\"./ion-text.entry.js\": [\n\t\t419,\n\t\t37\n\t],\n\t\"./ion-textarea.entry.js\": [\n\t\t420,\n\t\t38\n\t],\n\t\"./ion-toast.entry.js\": [\n\t\t421,\n\t\t39\n\t],\n\t\"./ion-toggle.entry.js\": [\n\t\t422,\n\t\t12\n\t],\n\t\"./ion-virtual-scroll.entry.js\": [\n\t\t423,\n\t\t50\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 184;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./ion-icon.entry.js\": [\n\t\t424,\n\t\t57\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 186;\nmodule.exports = webpackAsyncContext;","import { IAnyModelType, Instance, types } from 'mobx-state-tree'\nimport * as reactFlow from 'react-flow-renderer'\nimport { ArrowHeadType, Position } from 'react-flow-renderer'\nimport clsx from 'clsx'\n\ntype NodeData = { label: string }\nexport type FlowEdge = reactFlow.Edge<null>\nexport type FlowNode = reactFlow.Node<NodeData>\nexport type FlowElement = FlowNode | FlowEdge\n\nconst Node = types\n  .model({\n    id: types.identifierNumber,\n    label: types.string,\n    parent: types.maybe(types.reference(types.late((): IAnyModelType => Node))),\n    outgoing: false,\n    side: types.number, // 0, -1, 1\n    posX: 0,\n    posY: 0,\n  })\n  .views(self => ({\n    get type (): 'default' | 'center' | 'output' {\n      if (!self.parent) { return 'center' }\n      if (!self.outgoing) { return 'output' }\n      return 'default'\n    },\n  }))\n  .views(self => ({\n    get klass (): string {\n      return clsx('node', {\n        center: !self.parent,\n      })\n    },\n  }))\n  .views(self => ({\n    get flowData (): FlowNode {\n      const sourcePosition = !self.parent ? undefined : self.side > 0 ? Position.Right : Position.Left\n      const targetPosition = !self.parent ? undefined : self.side > 0 ? Position.Left : Position.Right\n\n      return {\n        id: `${self.id}`,\n        position: {\n          x: self.posX,\n          y: self.posY,\n        },\n        data: {\n          label: self.label\n        },\n        type: self.type,\n        sourcePosition,\n        targetPosition,\n        className: self.klass,\n      }\n    },\n    get edgeToParent (): FlowEdge | undefined {\n      if (!self.parent) {\n        return undefined\n      }\n\n      const sourceHandle = !self.parent ? undefined : (\n        self.side > 0 ? 'right' : 'left'\n      )\n\n      return {\n        id: `${self.id}-${self.parent.id}`,\n        source: self.parent.id.toString(),\n        target: self.id.toString(),\n        // animated: false,\n        // arrowHeadType: ArrowHeadType.Arrow,\n        sourceHandle,\n      }\n    }\n  }))\n\nexport default Node\n\nexport type NodeInstance = Instance<typeof Node>\n\nexport const NODE_H = 48\nexport const NODE_W = 128\nconst HORIZONTAL_MARGIN = 100\nconst VERTICAL_MARGIN = 200\nconst DISTURBANCE = 20\n\n// export function newNode ({ id, level, indexInBatch, batchSize }: {\n//   id: number\n//   level: number\n//   indexInBatch: number\n//   batchSize: number\n// }): NodeInstance {\n//   const deltaX = 0 - (batchSize - 1) / 2 * HORIZONTAL_MARGIN\n//   let posX = indexInBatch * HORIZONTAL_MARGIN + deltaX\n//   let posY = 0 - level * VERTICAL_MARGIN\n\n//   // TODO\n//   posX += random(0 - DISTURBANCE, DISTURBANCE)\n//   posY += random(0 - DISTURBANCE, DISTURBANCE)\n\n//   const data = genNodeData(milestone)\n\n//   return Node.create({\n//     id,\n//     level,\n//     posX,\n//     posY,\n//     data\n//   })\n// }\n","import { filter, random } from \"lodash\"\nimport dagre from \"dagre\"\nimport { NodesData } from \"./nodeData\"\n\nconst NODE_W = 200\nconst NODE_H = 48\nconst NODE_MARGIN_X = 50\nconst DISTURBANCE = 8\n\nexport function layoutHalfNodes (nodes: NodesData, direction: 'LR' | 'RL'): void {\n  const g = new dagre.graphlib.Graph()\n  g.setGraph({ rankdir: direction })\n  g.setDefaultEdgeLabel(() => ({}))\n\n  const halfNodes = filter(Object.values(nodes), node =>\n    ( direction === 'LR' && node.side >= 0 ) ||\n    ( direction === 'RL' && node.side <= 0 )\n  )\n\n  halfNodes.forEach(node => {\n    g.setNode(node.id.toString(), { width: NODE_W, height: NODE_H })\n    if (node.side === 0) {\n      return\n    }\n    g.setEdge(\n      node.parent?.toString() as string,\n      node.id.toString()\n    )\n  })\n\n  dagre.layout(g)\n\n  halfNodes.forEach(node => {\n    const nodeWithPos = g.node(node.id.toString())\n\n    node.posX = nodeWithPos.x - NODE_W / 2 + random(0 - DISTURBANCE, DISTURBANCE)\n    node.posY = nodeWithPos.y - NODE_H / 2 + random(0 - DISTURBANCE, DISTURBANCE)\n  })\n}\n","import { Graph, GraphInstance } from \"../graph\";\nimport { layoutHalfNodes } from \"./layoutHalfNodes\";\nimport { NodeData, NodesData } from \"./nodeData\";\n\nexport function graphFromDoc (doc: any): GraphInstance { // TODO type\n  console.info(doc)\n\n  const nodes: NodesData = {}\n\n  let level = -1\n  let nodesN = -1\n  let ancestors: NodeData[] = []\n  let pointingRight = false\n\n  function side (parent: NodeData | undefined): number {\n    if (!parent) { return 0 }\n    if (parent.side === 0) {\n      pointingRight = !pointingRight\n      return pointingRight ? 1 : -1\n    }\n    return parent.side\n  }\n\n  function newNode (label: string): NodeData {\n    nodesN += 1\n    const id = nodesN\n    const parent = level > 0 ? ancestors[level - 1] : undefined\n\n    const node = {\n      id,\n      label,\n      parent: parent?.id,\n      side: side(parent),\n      // TODO\n    }\n    nodes[id] = node\n\n    if (parent) {\n      parent.outgoing = true\n    }\n\n    console.info('new node', node)\n    return node\n  }\n\n  function parsePara (docNode: any): string {\n    console.info('parsePara', docNode)\n    const text = docNode?.content?.map((child: any) => child.text)?.join()\n    return text ?? ''\n  }\n\n  function parseItem (docNode: any): void {\n    // assertion:\n    // first child paragraph (may have no content)\n    // second optional child bulletList\n\n    if (docNode.type !== 'listItem') { return }\n\n    console.info('parseItem', docNode)\n\n    // label\n    const label = parsePara(docNode.content[0])\n    const node = newNode(label)\n\n    ancestors[level] = node\n\n    const subList = docNode.content?.[1]\n    if (subList) {\n      parseList(subList)\n    }\n  }\n\n  function parseList (docNode: any): void {\n    if (docNode.type !== 'bulletList') { return }\n    console.info('parseList', docNode)\n\n    level += 1\n    for (const subNode of docNode.content as any[]) {\n      parseItem(subNode)\n    }\n    level -= 1\n  }\n\n  parseList(doc.content[0])\n\n  layoutHalfNodes(nodes, 'LR')\n  const deltaY = nodes[0].posY\n  layoutHalfNodes(nodes, 'RL')\n  const deltaX = nodes[0].posX\n\n  Object.values(nodes).forEach(node => {\n    if (node.side > 0) {\n      (node.posX as number) += deltaX as number\n      (node.posY as number) -= deltaY as number\n    }\n  })\n\n  return Graph.create({nodes})\n}\n","import { Instance, types } from 'mobx-state-tree'\n\nimport Node, { FlowElement } from './node'\n\nexport const Graph = types\n  .model({\n    nodes: types.map(Node),\n  })\n  .views(self => ({\n    get elements (): FlowElement[] {\n      const elements: FlowElement[] = []\n\n      Array.from(self.nodes.values()).forEach(node => {\n        elements.push(node.flowData)\n        const edge = node.edgeToParent\n        if (edge) {\n          elements.push(edge)\n        }\n      })\n\n      return elements\n    }\n  }))\n\nexport type GraphInstance = Instance<typeof Graph>\n\nexport { graphFromDoc } from './graph/graphFromDoc'\n","import { Instance, types } from 'mobx-state-tree'\nimport { createContext, useContext } from 'react'\nimport { Graph, graphFromDoc } from './graph'\n\nconst RootStore = types\n  .model({\n    graph: Graph,\n  })\n  .actions(self => ({\n    updateDoc (doc: any) { // TODO tiptap/prosemirror doc type\n      self.graph = graphFromDoc(doc)\n      console.log(self.graph)\n    }\n  }))\n\nexport type RootStoreInstance = Instance<typeof RootStore>\n\nexport const rootStore = RootStore.create({\n  graph: {}\n})\n\nexport const RootStoreContext = createContext<null | RootStoreInstance>(null)\n\nexport function useRoot (): RootStoreInstance {\n  const store = useContext(RootStoreContext)\n  if (store === null) {\n    throw new Error('Store cannot be null, please add a context provider')\n  }\n  return store\n}\n","import { useEditor, EditorContent } from '@tiptap/react'\nimport StarterKit from '@tiptap/starter-kit'\nimport { useRoot } from '../models/root'\n\nexport const INIT_CONTENT = `\n<ul>\n  <li>\n    <p>instant mind</p>\n    <ul>\n      <li>\n        <p>design</p>\n      </li>\n      <li>\n        <p>development</p>\n        <ul>\n          <li>\n            <p>editor</p>\n          </li>\n          <li>\n            <p>flow utility</p>\n          </li>\n          <li>\n            <p>layout algorithm</p>\n          </li>\n          <li>\n            <p>download</p>\n          </li>\n        </ul>\n      </li>\n      <li>\n        <p>deployment</p>\n        <ul>\n          <li>\n            <p>github pages</p>\n          </li>\n        </ul>\n      </li>\n    </ul>\n  </li>\n</ul>\n`\n\nconst Editor = () => {\n  const root = useRoot()\n\n  const editor = useEditor({\n    extensions: [\n      StarterKit,\n    ],\n    content: INIT_CONTENT,\n    autofocus: true, // TODO not working\n    onCreate ({editor}) {\n      const doc = editor.getJSON()\n      root.updateDoc(doc)\n    },\n    onUpdate ({editor}) {\n      // console.log('onUpdate')\n      const doc = editor.getJSON()\n      root.updateDoc(doc)\n\n      console.log(editor.getHTML())\n    },\n  })\n\n  return (\n    <EditorContent editor={editor} id=\"editor\" />\n  )\n}\n\nexport default Editor\n","import { memo } from 'react'\nimport { Handle, Position } from 'react-flow-renderer'\n\ninterface Props {\n  data: any\n}\n\nconst CenterNode = memo(({data}: Props) => {\n  return <>\n    <div>\n      {data.label}\n    </div>\n    <Handle\n      type=\"source\"\n      position={Position.Left}\n      id=\"left\"\n    />\n    <Handle\n      type=\"source\"\n      position={Position.Right}\n      id=\"right\"\n    />\n  </>\n})\n\nexport default CenterNode\n","import { observer } from 'mobx-react-lite'\nimport { useCallback, useEffect, useState } from 'react'\nimport ReactFlow, { Background, BackgroundVariant, MiniMap, OnLoadParams } from 'react-flow-renderer'\nimport { useRoot } from \"../models/root\"\nimport CenterNode from './CenterNode'\n\nconst FLOW_ZOOM_DEFAULT = 0.8\n\nconst Mind = observer(() => {\n  const root = useRoot()\n\n  const [flowInstance, setFlowInstance] = useState<any>(null)\n\n  const onLoad = useCallback((instance: OnLoadParams) => {\n    setFlowInstance(instance)\n    setTimeout(() => {\n      instance.fitView()\n    }, 200)\n  }, [])\n\n  useEffect(() => {\n    flowInstance?.fitView()\n  }, [root.graph.elements])\n\n  return (\n    <ReactFlow\n      id=\"mind\"\n      nodeTypes={{ center: CenterNode }}\n      elements={root.graph.elements}\n      onLoad={onLoad}\n      elementsSelectable={false}\n      // nodesDraggable={false}\n      nodesConnectable={false}\n      // TODO The React Flow parent container needs a width and a height to render the graph.\n      // style={{ width: `${windowSize.innerWidth}px`, height: `${windowSize.innerHeight}px` }}\n      // minZoom={FLOW_ZOOM_MIN}\n      // maxZoom={FLOW_ZOOM_MAX}\n      defaultZoom={FLOW_ZOOM_DEFAULT}\n      // onElementClick={onElementClick}\n    >\n      <Background variant={BackgroundVariant.Lines} />\n      <MiniMap />\n    </ReactFlow>\n  )\n})\n\nexport default Mind\n","import { IonButton, IonButtons, IonCol, IonContent, IonFab, IonFabButton, IonGrid, IonHeader, IonIcon, IonPage, IonRow, IonTitle, IonToolbar } from '@ionic/react'\nimport { downloadOutline } from 'ionicons/icons'\nimport Editor from '../components/Editor'\nimport Mind from '../components/Mind'\nimport './Home.sass'\n\nconst Home: React.FC = () => {\n  return (\n    <IonPage>\n      <IonHeader>\n        <IonToolbar>\n          <IonTitle>InstantMind</IonTitle>\n          <IonButtons slot=\"primary\">\n            <IonButton>\n              <IonIcon slot=\"icon-only\" icon={downloadOutline} />\n            </IonButton>\n          </IonButtons>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent fullscreen>\n        <IonHeader collapse=\"condense\">\n          <IonToolbar>\n            <IonTitle size=\"large\">InstantMind</IonTitle>\n          </IonToolbar>\n        </IonHeader>\n\n        <Editor />\n        <Mind />\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default Home;\n","import { Redirect, Route } from 'react-router-dom';\nimport { IonApp, IonRouterOutlet } from '@ionic/react';\nimport { IonReactRouter } from '@ionic/react-router';\nimport { rootStore, RootStoreContext } from './models/root';\nimport Home from './pages/Home';\n\nimport 'animate.css/animate.min.css'\n\n/* Core CSS required for Ionic components to work properly */\nimport '@ionic/react/css/core.css';\n\n/* Basic CSS for apps built with Ionic */\nimport '@ionic/react/css/normalize.css';\nimport '@ionic/react/css/structure.css';\nimport '@ionic/react/css/typography.css';\n\n/* Optional CSS utils that can be commented out */\nimport '@ionic/react/css/padding.css';\nimport '@ionic/react/css/float-elements.css';\nimport '@ionic/react/css/text-alignment.css';\nimport '@ionic/react/css/text-transformation.css';\nimport '@ionic/react/css/flex-utils.css';\nimport '@ionic/react/css/display.css';\n\n/* Theme variables */\nimport './theme/variables.css';\n\nconst App: React.FC = () => (\n  <RootStoreContext.Provider value={rootStore}>\n    <IonApp>\n      {/* <IonReactRouter>\n        <IonRouterOutlet>\n          <Route exact path=\"/home\">\n            <Home />\n          </Route>\n          <Route exact path=\"/\">\n            <Redirect to=\"/home\" />\n          </Route>\n        </IonRouterOutlet>\n      </IonReactRouter> */}\n      <Home />\n    </IonApp>\n  </RootStoreContext.Provider>\n);\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.unregister();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}